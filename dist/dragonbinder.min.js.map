//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkZWVwRnJlZXplIiwib2JqIiwiT2JqZWN0IiwiaXNGcm96ZW4iLCJBcnJheSIsImlzQXJyYXkiLCJpIiwibCIsImxlbmd0aCIsInByb3BzIiwiUmVmbGVjdCIsIm93bktleXMiLCJmcmVlemUiLCJEcmFnb25iaW5kZXIiLCJzdGF0ZSIsIm11dGF0aW9ucyIsImFjdGlvbnMiLCJnZXR0ZXJzIiwibW9kdWxlcyIsInNob3VsZEZyZWV6ZSIsIm5hbWVzcGFjZSIsInJvb3RTdG9yZSIsImxvY2FsU3RhdGUiLCJ0aGlzIiwiUHJveHkiLCJnZXQiLCJzdGF0ZTIiLCJwcm9wIiwiaW5pdCIsInNldCIsInZhbHVlIiwiaXNVbmZyb3plbiIsIm9sZCIsInRyaWdnZXIiLCJkZWxldGVQcm9wZXJ0eSIsImRlZmluZVByb3BlcnR5IiwiZnJvemVuIiwicGx1Z2lucyIsImNoaWxkTW9kdWxlTmFtZXNwYWNlcyIsImtleXMiLCJsaXN0ZW5lcnMiLCJkZWxldGUiLCJiZWZvcmVjb21taXQiLCJjb21taXQiLCJiZWZvcmVkaXNwYXRjaCIsImRpc3BhdGNoIiwiZ2V0dGVyIiwiYWRkbGlzdGVuZXIiLCJyZW1vdmVsaXN0ZW5lciIsInBsdWdpbiIsInJlZ2lzdGVyTW9kdWxlIiwidW5yZWdpc3Rlck1vZHVsZSIsImdldHRlcnMyIiwic3RvcmUiLCJrZXkiLCJnZXRTdG9yZSIsImVycm9yIiwiZW51bWVyYWJsZSIsImZvckVhY2giLCJuYW1lc3BhY2UyIiwibiIsInByb3RvdHlwZSIsImZuIiwia2V5RXhpc3RzIiwib2JqZWN0bmFtZSIsIm9iamVjdCIsIkVycm9yIiwiaXNGdW5jdGlvbiIsInR5cGUiLCJjYWxsYmFjayIsImluZGV4T2YiLCJwYXJ0cyIsInNwbGl0IiwicG9wIiwibW9kdWxlTmFtZSIsImpvaW4iLCJtdXRhdGlvbiIsImFyZ3MiLCJhY3Rpb24iLCJQcm9taXNlIiwicmVzb2x2ZSIsInRoZW4iLCJyZXN1bHQiLCJldmVudCIsIm9uIiwibGlzdGVuZXIiLCJwdXNoIiwib2ZmIiwiaW5kZXgiLCJzcGxpY2UiLCJ1c2UiLCJvcHRpb25zIiwibW9kdWxlMiIsIm5ld1N0b3JlIiwiYXNzaWduIiwiZXhwb3J0cyIsIl9fRVhQT1JUU19fIiwid2luZG93IiwiZ2xvYmFsIl0sInNvdXJjZXMiOlsiLi4vbGliL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogVGhpcyBtZXRob2QgaXMgdXNlZCB0byBkZWVwIGZyZWV6ZSBhbiBvYmplY3RcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmogVGhlIG9iamVjdCB0byBmcmVlemVcbiAqIEByZXR1cm5zIHtPYmplY3R9IE9iamVjdCBmcm96ZW5cbiAqL1xuZnVuY3Rpb24gZGVlcEZyZWV6ZShvYmopIHtcbiAgaWYgKHR5cGVvZiBvYmogPT09IFwib2JqZWN0XCIgJiYgb2JqICE9PSBudWxsICYmICFPYmplY3QuaXNGcm96ZW4ob2JqKSkge1xuICAgIGlmIChBcnJheS5pc0FycmF5KG9iaikpIHtcbiAgICAgIGZvciAobGV0IGkgPSAwLCBsID0gb2JqLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICBkZWVwRnJlZXplKG9ialtpXSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCBwcm9wcyA9IFJlZmxlY3Qub3duS2V5cyhvYmopO1xuICAgICAgZm9yIChsZXQgaSA9IDAsIGwgPSBwcm9wcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgZGVlcEZyZWV6ZShvYmpbcHJvcHNbaV1dKTtcbiAgICAgIH1cbiAgICB9XG4gICAgT2JqZWN0LmZyZWV6ZShvYmopO1xuICB9XG5cbiAgcmV0dXJuIG9iajtcbn1cblxuLyoqXG4gKiBUaGlzIGlzIHRoZSBTdG9yZSBlbnRpdHlcbiAqXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhIFRoZSBpbml0aWFsIG9wdGlvbnMgdG8gY3JlYXRlIHRoZSBzdG9yZVxuICogQHBhcmFtIHtPYmplY3R9IFtkYXRhLnN0YXRlXSBPcHRpb25hbCBpbml0aWFsIHN0YXRlIGZvciB0aGUgc3RvcmVcbiAqIEBwYXJhbSB7T2JqZWN0fSBbZGF0YS5tdXRhdGlvbnNdIE9wdGlvbmFsIG11dGF0aW9uIG1ldGhvZHMgdG8gdXBkYXRlIHRoZSBzdGF0ZVxuICogQHBhcmFtIHtPYmplY3R9IFtkYXRhLmFjdGlvbnNdIE9wdGlvbmFsIGFjdGlvbnMgdG8gaGFuZGxlIGFzeW5jIG1ldGhvZHMgYW5kIHVwZGF0ZSB0aGUgc3RhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBbZGF0YS5nZXR0ZXJzXSBPcHRpb25hbCBnZXR0ZXJzIHRvIHJlYWQgZnJvbSB0aGUgc3RhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBbZGF0YS5tb2R1bGVzXSBPcHRpb25hbCBtb2R1bGVzIHRvIHJlZ2lzdGVyIHRvIHRoaXMgc3RvcmVcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW2RhdGEuc2hvdWxkRnJlZXplPXRydWVdIFdoZXRoZXIgdG8gZnJlZXplIHRoZSBzdGF0ZVxuICogQHJldHVybnMge09iamVjdH0gbmV3IHN0b3JlIG9iamVjdFxuICovXG5mdW5jdGlvbiBEcmFnb25iaW5kZXIoe1xuICBzdGF0ZSxcbiAgbXV0YXRpb25zLFxuICBhY3Rpb25zLFxuICBnZXR0ZXJzLFxuICBtb2R1bGVzLFxuICBzaG91bGRGcmVlemUgPSB0cnVlLFxuICBuYW1lc3BhY2UsXG4gIHJvb3RTdG9yZVxufSA9IHt9KSB7XG4gIC8vIEluaXRpYWxpemUgdGhlIGxvY2FsU3RhdGUgZm9yIHRoaXMgc3RvcmVcbiAgbGV0IGxvY2FsU3RhdGUgPSB0eXBlb2Ygc3RhdGUgPT09IFwiZnVuY3Rpb25cIiA/IHN0YXRlKCkgOiBzdGF0ZTtcblxuICAvKipcbiAgICogV2UgY3JlYXRlIGEgcHJveHkgZm9yIHRoZSBzdGF0ZVxuICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgKiBAbmFtZSBEcmFnb25iaW5kZXIuc3RhdGVcbiAgICovXG4gIHRoaXMuc3RhdGUgPSBuZXcgUHJveHkobG9jYWxTdGF0ZSB8fCB7fSwge1xuICAgIC8qKlxuICAgICAqIEV2ZXJ5IHRpbWUgd2UgdHJ5IHRvIGFjY2VzcyBhIHByb3BlcnR5IGZyb20gdGhlIHN0YXRlIHdlIHRyeSB0byBkZWVwIGZyZWV6ZSB0aGUgcHJvcGVydHlcbiAgICAgKiB0byBwcmV2ZW50IGRpcmVjdCBtb2RpZmljYXRpb25zIHRvIHRoZSBzdGF0ZVxuICAgICAqXG4gICAgICogQHR5cGUge09iamVjdH1cbiAgICAgKiBAbmFtZSBEcmFnb25iaW5kZXIuc3RhdGUuZ2V0XG4gICAgICogQHBhcmFtIHtPYmplY3R9IHN0YXRlIFRoZSBzdGF0ZSBvYmplY3RcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gcHJvcCBUaGUgcHJvcGVydHkgdG8gcmVhZFxuICAgICAqIEByZXR1cm5zIHtBbnl9IFRoZSBwcm9wZXJ0eSB2YWx1ZVxuICAgICAqL1xuICAgIGdldDogKHN0YXRlLCBwcm9wKSA9PiB7XG4gICAgICBpZiAoKHRoaXMucm9vdFN0b3JlIHx8IHRoaXMpLmluaXQubW9kdWxlc1twcm9wXSkge1xuICAgICAgICByZXR1cm4gc3RhdGVbcHJvcF07XG4gICAgICB9XG4gICAgICBpZiAoc2hvdWxkRnJlZXplKSB7XG4gICAgICAgIHJldHVybiBkZWVwRnJlZXplKHN0YXRlW3Byb3BdKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHN0YXRlW3Byb3BdO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBJZiB0aGUgdXNlciB0cmllcyB0byBzZXQgZGlyZWN0bHkgaXQgd2lsbCB0aHJvdyBhbiBlcnJvciwgb25seSBpZiB3ZSBoYXZlIHVuZnJvemVuIHRoZSBzdGF0ZSB2aWEgY29tbWl0XG4gICAgICogdGhpcyB3aWxsIHByb2NlZWQgdG8gc2V0IHRoZSB2YWx1ZVxuICAgICAqXG4gICAgICogQHR5cGUge09iamVjdH1cbiAgICAgKiBAbmFtZSBEcmFnb25iaW5kZXIuc3RhdGUuc2V0XG4gICAgICogQHBhcmFtIHtPYmplY3R9IHN0YXRlIFRoZSBzdGF0ZSBvYmplY3RcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gcHJvcCBUaGUgcHJvcGVydHkgdG8gc2V0XG4gICAgICogQHBhcmFtIHtBbnl9IHZhbHVlIFRoZSBwcm9wZXJ0eSB2YWx1ZVxuICAgICAqIEByZXR1cm5zIHtCb29sZWFufSBBbHdheXMgcmV0dXJucyB0cnVlXG4gICAgICovXG4gICAgc2V0OiAoc3RhdGUsIHByb3AsIHZhbHVlKSA9PiB7XG4gICAgICB0aGlzLmlzVW5mcm96ZW4oKTtcbiAgICAgIGxldCBvbGQgPSBzdGF0ZVtwcm9wXTtcbiAgICAgIHN0YXRlW3Byb3BdID0gdmFsdWU7XG4gICAgICBpZiAodGhpcy5uYW1lc3BhY2UpIHtcbiAgICAgICAgcHJvcCA9IGAke3RoaXMubmFtZXNwYWNlfS4ke3Byb3B9YDtcbiAgICAgIH1cbiAgICAgICh0aGlzLnJvb3RTdG9yZSB8fCB0aGlzKS50cmlnZ2VyKFwic2V0XCIsIHByb3AsIHZhbHVlLCBvbGQpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIElmIHRoZSB1c2VyIHRyaWVzIHRvIGRlbGV0ZSBkaXJlY3RseSBpdCB3aWxsIHRocm93IGFuIGVycm9yLCBvbmx5IGlmIHdlIGhhdmUgdW5mcm96ZW4gdGhlIHN0YXRlIHZpYSBjb21taXRcbiAgICAgKiB0aGlzIHdpbGwgcHJvY2VlZCB0byBkZWxldGUgdGhlIHByb3BlcnR5XG4gICAgICpcbiAgICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgICAqIEBuYW1lIERyYWdvbmJpbmRlci5zdGF0ZS5kZWxldGVQcm9wZXJ0eVxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBzdGF0ZSBUaGUgc3RhdGUgb2JqZWN0XG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHByb3AgVGhlIHByb3BlcnR5IHRvIGRlbGV0ZVxuICAgICAqIEByZXR1cm5zIHtCb29sZWFufSBBbHdheXMgcmV0dXJucyB0cnVlXG4gICAgICovXG4gICAgZGVsZXRlUHJvcGVydHk6IChzdGF0ZSwgcHJvcCkgPT4ge1xuICAgICAgdGhpcy5pc1VuZnJvemVuKCk7XG4gICAgICBsZXQgb2xkID0gc3RhdGVbcHJvcF07XG4gICAgICBkZWxldGUgc3RhdGVbcHJvcF07XG4gICAgICBpZiAodGhpcy5uYW1lc3BhY2UpIHtcbiAgICAgICAgcHJvcCA9IGAke3RoaXMubmFtZXNwYWNlfS4ke3Byb3B9YDtcbiAgICAgIH1cbiAgICAgICh0aGlzLnJvb3RTdG9yZSB8fCB0aGlzKS50cmlnZ2VyKFwiZGVsZXRlXCIsIHByb3AsIG9sZCk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH0pO1xuXG4gIC8qKlxuICAgKiBXZSB3aWxsIGRlZmluZSBhIGhpZGRlbiBwcm9wZXJ0eSB0byBzdG9yZSB0aGUgaW5pdCBkYXRhXG4gICAqXG4gICAqIEB0eXBlIHtPYmplY3R9XG4gICAqIEBuYW1lIERyYWdvbmJpbmRlci5pbml0XG4gICAqL1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJpbml0XCIsIHtcbiAgICB2YWx1ZToge1xuICAgICAgLyoqXG4gICAgICAgKiBUaGlzIHByb3BlcnR5IHdpbGwgc3RvcmUgdGhlIGZyb3plbiBzdGF0ZSBvZiB0aGUgc3RvcmVcbiAgICAgICAqXG4gICAgICAgKiBAdHlwZSB7Qm9vbGVhbn1cbiAgICAgICAqIEBuYW1lIERyYWdvbmJpbmRlci5pbml0LmZyb3plblxuICAgICAgICovXG4gICAgICBmcm96ZW46IHRydWUsXG5cbiAgICAgIC8qKlxuICAgICAgICogVGhpcyBwcm9wZXJ0eSB3aWxsIHN0b3JlIHRoZSBwbHVnaW5zXG4gICAgICAgKiBAdHlwZSB7QXJyYXl9XG4gICAgICAgKiBAbmFtZSBEcmFnb25iaW5kZXIuaW5pdC5wbHVnaW5zXG4gICAgICAgKi9cbiAgICAgIHBsdWdpbnM6IFtdLFxuXG4gICAgICAvKipcbiAgICAgICAqIFRoaXMgcHJvcGVydHkgd2lsbCBzdG9yZSB0aGUgcmVnaXN0ZXJlZCBtb2R1bGVzXG4gICAgICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgICAgICogQG5hbWUgRHJhZ29uYmluZGVyLmluaXQubW9kdWxlc1xuICAgICAgICovXG4gICAgICBtb2R1bGVzOiB7fSxcblxuICAgICAgLyoqXG4gICAgICAgKiBUaGlzIHdpbGwgaGF2ZSB0aGUgaW5pdGlhbCBjaGlsZCBtb2R1bGUgbmFtZXNwYWNlIGRlZmluaXRpb25zXG4gICAgICAgKiBAdHlwZSB7QXJyYXl9XG4gICAgICAgKiBAbmFtZSBEcmFnb25iaW5kZXIuaW5pdC5jaGlsZE1vZHVsZU5hbWVzcGFjZXNcbiAgICAgICAqL1xuICAgICAgY2hpbGRNb2R1bGVOYW1lc3BhY2VzOiBPYmplY3Qua2V5cyhtb2R1bGVzIHx8IHt9KSxcblxuICAgICAgLyoqXG4gICAgICAgKiBUaGlzIHByb3BlcnR5IHdpbGwgc3RvcmUgdGhlIGV2ZW50IGxpc3RlbmVyc1xuICAgICAgICogQHR5cGUge09iamVjdH1cbiAgICAgICAqIEBuYW1lIERyYWdvbmJpbmRlci5pbml0Lmxpc3RlbmVyc1xuICAgICAgICogQHByb3BlcnR5IHtBcnJheX0gbGlzdGVuZXJzLnNldCBUaGlzIHdpbGwgc3RvcmUgdGhlIHNldCBldmVudCBsaXN0ZW5lcnNcbiAgICAgICAqIEBwcm9wZXJ0eSB7QXJyYXl9IGxpc3RlbmVycy5kZWxldGUgVGhpcyB3aWxsIHN0b3JlIHRoZSBkZWxldGUgZXZlbnQgbGlzdGVuZXJzXG4gICAgICAgKiBAcHJvcGVydHkge0FycmF5fSBsaXN0ZW5lcnMuYmVmb3JlY29tbWl0IFRoaXMgd2lsbCBzdG9yZSB0aGUgYmVmb3JlY29tbWl0IGV2ZW50IGxpc3RlbmVyc1xuICAgICAgICogQHByb3BlcnR5IHtBcnJheX0gbGlzdGVuZXJzLmNvbW1pdCBUaGlzIHdpbGwgc3RvcmUgdGhlIGNvbW1pdCBldmVudCBsaXN0ZW5lcnNcbiAgICAgICAqIEBwcm9wZXJ0eSB7QXJyYXl9IGxpc3RlbmVycy5iZWZvcmVkaXNwYXRjaCBUaGlzIHdpbGwgc3RvcmUgdGhlIGJlZm9yZWRpc3BhdGNoIGV2ZW50IGxpc3RlbmVyc1xuICAgICAgICogQHByb3BlcnR5IHtBcnJheX0gbGlzdGVuZXJzLmRpc3BhdGNoIFRoaXMgd2lsbCBzdG9yZSB0aGUgZGlzcGF0Y2ggZXZlbnQgbGlzdGVuZXJzXG4gICAgICAgKiBAcHJvcGVydHkge0FycmF5fSBsaXN0ZW5lcnMuZ2V0dGVyIFRoaXMgd2lsbCBzdG9yZSB0aGUgZ2V0dGVyIGV2ZW50IGxpc3RlbmVyc1xuICAgICAgICogQHByb3BlcnR5IHtBcnJheX0gbGlzdGVuZXJzLmFkZGxpc3RlbmVyIFRoaXMgd2lsbCBzdG9yZSB0aGUgYWRkbGlzdGVuZXIgZXZlbnQgbGlzdGVuZXJzXG4gICAgICAgKiBAcHJvcGVydHkge0FycmF5fSBsaXN0ZW5lcnMucmVtb3ZlbGlzdGVuZXIgVGhpcyB3aWxsIHN0b3JlIHRoZSByZW1vdmVsaXN0ZW5lciBldmVudCBsaXN0ZW5lcnNcbiAgICAgICAqIEBwcm9wZXJ0eSB7QXJyYXl9IGxpc3RlbmVycy5wbHVnaW4gVGhpcyB3aWxsIHN0b3JlIHRoZSBwbHVnaW4gZXZlbnQgbGlzdGVuZXJzXG4gICAgICAgKiBAcHJvcGVydHkge0FycmF5fSBsaXN0ZW5lcnMucmVnaXN0ZXJNb2R1bGUgVGhpcyB3aWxsIHN0b3JlIHRoZSByZWdpc3Rlck1vZHVsZSBldmVudCBsaXN0ZW5lcnNcbiAgICAgICAqIEBwcm9wZXJ0eSB7QXJyYXl9IGxpc3RlbmVycy51bnJlZ2lzdGVyTW9kdWxlIFRoaXMgd2lsbCBzdG9yZSB0aGUgdW5yZWdpc3Rlck1vZHVsZSBldmVudCBsaXN0ZW5lcnNcbiAgICAgICAqL1xuICAgICAgbGlzdGVuZXJzOiB7XG4gICAgICAgIHNldDogW10sXG4gICAgICAgIGRlbGV0ZTogW10sXG4gICAgICAgIGJlZm9yZWNvbW1pdDogW10sXG4gICAgICAgIGNvbW1pdDogW10sXG4gICAgICAgIGJlZm9yZWRpc3BhdGNoOiBbXSxcbiAgICAgICAgZGlzcGF0Y2g6IFtdLFxuICAgICAgICBnZXR0ZXI6IFtdLFxuICAgICAgICBhZGRsaXN0ZW5lcjogW10sXG4gICAgICAgIHJlbW92ZWxpc3RlbmVyOiBbXSxcbiAgICAgICAgcGx1Z2luOiBbXSxcbiAgICAgICAgcmVnaXN0ZXJNb2R1bGU6IFtdLFxuICAgICAgICB1bnJlZ2lzdGVyTW9kdWxlOiBbXVxuICAgICAgfSxcblxuICAgICAgLyoqXG4gICAgICAgKiBTZXQgcGFzc2VkIGdldHRlcnMgZm9yIGZ1dHVyZSByZWZlcmVuY2VcbiAgICAgICAqIEB0eXBlIHtPYmplY3R9XG4gICAgICAgKiBAbmFtZSBEcmFnb25iaW5kZXIuaW5pdC5nZXR0ZXJzXG4gICAgICAgKi9cbiAgICAgIGdldHRlcnM6IGdldHRlcnMgfHwge30sXG5cbiAgICAgIC8qKlxuICAgICAgICogU2V0IHBhc3NlZCBtdXRhdGlvbnMgZm9yIGZ1dHVyZSByZWZlcmVuY2VcbiAgICAgICAqIEB0eXBlIHtPYmplY3R9XG4gICAgICAgKiBAbmFtZSBEcmFnb25iaW5kZXIuaW5pdC5tdXRhdGlvbnNcbiAgICAgICAqL1xuICAgICAgbXV0YXRpb25zOiBtdXRhdGlvbnMgfHwge30sXG4gICAgICAvKipcbiAgICAgICAqIFNldCBwYXNzZWQgYWN0aW9ucyBmb3IgZnV0dXJlIHJlZmVyZW5jZVxuICAgICAgICogQHR5cGUge09iamVjdH1cbiAgICAgICAqIEBuYW1lIERyYWdvbmJpbmRlci5pbml0LmFjdGlvbnNcbiAgICAgICAqL1xuICAgICAgYWN0aW9uczogYWN0aW9ucyB8fCB7fVxuICAgIH1cbiAgfSk7XG5cbiAgLyoqXG4gICAqIFdlIGNyZWF0ZSBhIHByb3h5IGZvciB0aGUgZ2V0dGVyc1xuICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgKiBAbmFtZSBEcmFnb25iaW5kZXIuZ2V0dGVyc1xuICAgKi9cbiAgdGhpcy5nZXR0ZXJzID0gbmV3IFByb3h5KGdldHRlcnMgfHwge30sIHtcbiAgICAvKipcbiAgICAgKiBXaGVuIHdlIHRyeSB0byBnZXQgYSBwcm9wZXJ0eSBvZiB0aGUgZ2V0dGVyIHdlIHdpbGwgY2FsbCB0aGUgb3JpZ2luYWxcbiAgICAgKiBnZXR0ZXIgbWV0aG9kIHBhc3NpbmcgdGhlIHN0YXRlIGFzIGZpcnN0IGFyZ3VtZW50IGFuZCB0aGUgb3RoZXIgZ2V0dGVycyBhcyBzZWNvbmRcbiAgICAgKiBpZiB3ZSB0cnkgdG8gZ2V0IGEgbm9uIGV4aXN0ZW50IGdldHRlciBpdCB3aWxsIGZhaWwgc2lsZW50bHkgYXMgaWZcbiAgICAgKiB3ZSB3ZXJlIHRyeWluZyB0byBnZXQgYW4gdW5kZWZpbmVkIHByb3BlcnR5XG4gICAgICpcbiAgICAgKiBAdHlwZSB7RnVuY3Rpb259XG4gICAgICogQG5hbWUgRHJhZ29uYmluZGVyLmdldHRlcnMuZ2V0XG4gICAgICogQHBhcmFtIHtPYmplY3R9IGdldHRlcnMgVGhlIGdldHRlcnMgb2JqZWN0XG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGdldHRlciBUaGUgbmFtZSBvZiB0aGUgZ2V0dGVyIHRvIHJlYWRcbiAgICAgKiBAcmV0dXJucyB7QW55fSBUaGUgdmFsdWUgb2YgdGhlIGdldHRlclxuICAgICAqL1xuICAgIGdldDogKGdldHRlcnMsIGdldHRlcikgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgbGV0IHsgc3RvcmUsIGtleSB9ID0gdGhpcy5nZXRTdG9yZSh0aGlzLCBnZXR0ZXIpO1xuXG4gICAgICAgIGlmIChzdG9yZSBpbnN0YW5jZW9mIERyYWdvbmJpbmRlciAmJiBzdG9yZS5pbml0LmdldHRlcnNba2V5XSkge1xuICAgICAgICAgIGxldCB2YWx1ZSA9IHN0b3JlLmluaXQuZ2V0dGVyc1trZXldKFxuICAgICAgICAgICAgc3RvcmUuc3RhdGUsXG4gICAgICAgICAgICBzdG9yZS5nZXR0ZXJzLFxuICAgICAgICAgICAgdGhpcy5zdGF0ZSxcbiAgICAgICAgICAgIHRoaXMuZ2V0dGVyc1xuICAgICAgICAgICk7XG4gICAgICAgICAgaWYgKHRoaXMubmFtZXNwYWNlKSB7XG4gICAgICAgICAgICBnZXR0ZXIgPSBgJHt0aGlzLm5hbWVzcGFjZX0uJHtnZXR0ZXJ9YDtcbiAgICAgICAgICB9XG4gICAgICAgICAgKHRoaXMucm9vdFN0b3JlIHx8IHRoaXMpLnRyaWdnZXIoXCJnZXR0ZXJcIiwgZ2V0dGVyLCB2YWx1ZSk7XG4gICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICAvKipcbiAgICogSWYgdGhpcyBpcyBhIHN0b3JlIGJlZW4gYXR0YWNoZWQgdG8gYW5vdGhlciBzdG9yZVxuICAgKiB0aGlzIHdpbGwgaGF2ZSB0aGUgcm9vdFN0b3JlIGZvciBmdXR1cmUgcmVmZXJlbmNlXG4gICAqXG4gICAqIEB0eXBlIHsoRHJhZ29uYmluZGVyfE51bGwpfVxuICAgKiBAbmFtZSBEcmFnb25iaW5kZXIucm9vdFN0b3JlXG4gICAqL1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJyb290U3RvcmVcIiwge1xuICAgIHZhbHVlOiByb290U3RvcmUgfHwgbnVsbCxcbiAgICBlbnVtZXJhYmxlOiB0cnVlXG4gIH0pO1xuXG4gIC8qKlxuICAgKiBJZiB0aGlzIGlzIGEgc3RvcmUgYmVlbiBhdHRhY2hlZCB0byBhbm90aGVyIHN0b3JlXG4gICAqIHRoaXMgd2lsbCBoYXZlIHRoZSBuYW1lc3BhY2UgYXR0YWNoZWRcbiAgICpcbiAgICogQHR5cGUgeyhTdHJpbmd8TnVsbCl9XG4gICAqIEBuYW1lIERyYWdvbmJpbmRlci5uYW1lc3BhY2VcbiAgICovXG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm5hbWVzcGFjZVwiLCB7XG4gICAgdmFsdWU6IG5hbWVzcGFjZSB8fCBudWxsLFxuICAgIGVudW1lcmFibGU6IHRydWVcbiAgfSk7XG5cbiAgLyoqXG4gICAqIEZpbmFsbHkgd2UgYXR0YWNoIHRoZSBpbml0aWFsIG1vZHVsZXNcbiAgICovXG4gIGlmIChtb2R1bGVzKSB7XG4gICAgT2JqZWN0LmtleXMobW9kdWxlcykuZm9yRWFjaCgobmFtZXNwYWNlKSA9PiB7XG4gICAgICBsZXQgbiA9IHRoaXMubmFtZXNwYWNlID8gYCR7dGhpcy5uYW1lc3BhY2V9LiR7bmFtZXNwYWNlfWAgOiBuYW1lc3BhY2U7XG4gICAgICAodGhpcy5yb290U3RvcmUgfHwgdGhpcykucmVnaXN0ZXJNb2R1bGUobiwgbW9kdWxlc1tuYW1lc3BhY2VdKTtcbiAgICB9KTtcbiAgfVxufVxuXG5EcmFnb25iaW5kZXIucHJvdG90eXBlID0gRHJhZ29uYmluZGVyLmZuID0ge1xuICAvKipcbiAgICogVGhpcyBtZXRob2QgY2hlY2tzIGlmIGEga2V5IGV4aXN0cyBpbiB0aGUgb2JqZWN0IHByb3ZpZGVkXG4gICAqIEB0aHJvd3Mge0Vycm9yfSBUaHJvd3MgYW4gZXJyb3IgaWYgdGhlIGtleSBkb2VzIG5vdCBleGlzdHNcbiAgICogQHBhcmFtIHtTdHJpbmd9IG9iamVjdG5hbWUgVGhlIG5hbWUgb2YgdGhlIG9iamVjdCBmb3IgbG9nIHJlZmVyZW5jZVxuICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgaW4gd2hpY2ggd2Ugd2lsbCBzZWFyY2hcbiAgICogQHBhcmFtIHtPYmplY3R9IGtleSBUaGUga2V5IHRvIHNlYXJjaCBmb3JcbiAgICogQHJldHVybnMge1ZvaWR9IC8vXG4gICAqL1xuICBrZXlFeGlzdHMob2JqZWN0bmFtZSwgb2JqZWN0LCBrZXkpIHtcbiAgICBpZiAoIW9iamVjdFtrZXldKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFRoZSAke29iamVjdG5hbWV9IFwiJHtrZXl9XCIgZG9lcyBub3QgZXhpc3RzLmApO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogVGhpcyBtZXRob2QgY2hlY2tzIHRoZSBwcm92aWRlZCBjYWxsYmFjayBpcyBhIGZ1bmN0aW9uXG4gICAqIEB0aHJvd3Mge0Vycm9yfSBUaHJvd3MgYW4gZXJyb3IgaWYgdGhlIGNhbGxiYWNrIGlzIG5vdCBhIGZ1bmN0aW9uXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlIFRoZSB0eXBlIHRvIHVzZSBmb3IgbG9nIHJlZmVyZW5jZVxuICAgKiBAcGFyYW0ge09iamVjdH0gY2FsbGJhY2sgVGhlIGNhbGxiYWNrIHRvIGNoZWNrXG4gICAqIEByZXR1cm5zIHtWb2lkfSAvL1xuICAgKi9cbiAgaXNGdW5jdGlvbih0eXBlLCBjYWxsYmFjaykge1xuICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBZb3UgbmVlZCB0byBwcm92aWRlIGEgdmFsaWQgZnVuY3Rpb24gYXMgJHt0eXBlfS5gKTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIEdpdmluZyBhIGRvdCBiYXNlZCBuYW1lc3BhY2UgdGhpcyBtZXRob2Qgd2lsbCBiZSB1c2VkIHRvIGZpbmQgdGhlIG1vZHVsZSB0byBiZSBjYWxsZWRcbiAgICogQHBhcmFtIHtEcmFnb25iaW5kZXJ9IHN0b3JlIFRoZSBzdG9yZSBpbnN0YW5jZSBpbiB3aGljaCBzZWFyY2ggZm9yIHRoZSBuYW1lc3BhY2VkIG1vZHVsZVxuICAgKiBAcGFyYW0ge1N0cmluZ30gbmFtZXNwYWNlIFRoZSBuYW1lc3BhY2UgdG8gc2VhcmNoXG4gICAqIEByZXR1cm5zIHtPYmplY3R9IHtzdG9yZSwga2V5fSBBbiBvYmplY3QgY29udGFpbmluZyB0aGUgZm91bmQgbW9kdWxlIGFzIGBzdG9yZWAgYW5kIHRoZSBmaW5hbCBrZXkgYXMgYGtleWAgcHJvcGVydHlcbiAgICovXG4gIGdldFN0b3JlKHN0b3JlLCBuYW1lc3BhY2UpIHtcbiAgICBsZXQga2V5ID0gbmFtZXNwYWNlO1xuXG4gICAgaWYgKGtleS5pbmRleE9mKFwiLlwiKSA+IC0xKSB7XG4gICAgICBsZXQgcGFydHMgPSBrZXkuc3BsaXQoXCIuXCIpO1xuICAgICAga2V5ID0gcGFydHMucG9wKCk7XG4gICAgICBsZXQgbW9kdWxlTmFtZSA9IHBhcnRzLmpvaW4oXCIuXCIpO1xuICAgICAgdGhpcy5rZXlFeGlzdHMoXCJtb2R1bGVcIiwgc3RvcmUuaW5pdC5tb2R1bGVzLCBtb2R1bGVOYW1lKTtcbiAgICAgIHN0b3JlID0gc3RvcmUuaW5pdC5tb2R1bGVzW21vZHVsZU5hbWVdO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBzdG9yZSxcbiAgICAgIGtleVxuICAgIH07XG4gIH0sXG5cbiAgLyoqXG4gICAqIFRoaXMgbWV0aG9kIGNoZWNrcyBpZiB0aGUgc3RvcmUgaXMgaW4gYSBzdGF0ZSBhYmxlIHRvIG11dGF0ZSB0aGUgc3RhdGVcbiAgICogQHRocm93cyB7RXJyb3J9IFRocm93cyBhbiBlcnJvciBpZiB0aGUgc3RvcmUgaXMgZnJvemVuXG4gICAqIEByZXR1cm5zIHtWb2lkfSAvL1xuICAgKi9cbiAgaXNVbmZyb3plbigpIHtcbiAgICBpZiAodGhpcy5pbml0LmZyb3plbikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiWW91IG5lZWQgdG8gY29tbWl0IGEgbXV0YXRpb24gdG8gY2hhbmdlIHRoZSBzdGF0ZVwiKTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIFRoaXMgbWV0aG9kIHVuZnJvemUgdGhlIHN0YXRlIGFuZCBwcm9jZXNzIGEgbXV0YXRpb25cbiAgICogQHRocm93cyBUaGlzIHdpbGwgdHJob3cgYW4gZXJyb3IgaWYgdGhlIG11dGF0aW9uIGRvZXMgbm90IGV4aXN0c1xuICAgKiBAcGFyYW0ge1N0cmluZ30gbXV0YXRpb24gVGhlIG11dGF0aW9uIG5hbWUgdG8gcHJvY2Vzc1xuICAgKiBAcGFyYW0gIHsuLi5hbnl9IFthcmdzXSBUaGUgYXJndW1lbnRzIHRvIHBhc3MgdG8gdGhlIG11dGF0aW9uXG4gICAqIEByZXR1cm5zIHtWb2lkfSBWb2lkXG4gICAqL1xuICBjb21taXQobXV0YXRpb24sIC4uLmFyZ3MpIHtcbiAgICBsZXQgeyBzdG9yZSwga2V5IH0gPSB0aGlzLmdldFN0b3JlKHRoaXMsIG11dGF0aW9uKTtcbiAgICB0aGlzLmtleUV4aXN0cyhcIm11dGF0aW9uXCIsIHN0b3JlLmluaXQubXV0YXRpb25zLCBrZXkpO1xuXG4gICAgc3RvcmUuaW5pdC5mcm96ZW4gPSBmYWxzZTtcbiAgICB0aGlzLnRyaWdnZXIoXCJiZWZvcmVjb21taXRcIiwgbXV0YXRpb24sIC4uLmFyZ3MpO1xuICAgIHN0b3JlLmluaXQubXV0YXRpb25zW2tleV0oc3RvcmUuc3RhdGUsIC4uLmFyZ3MpO1xuICAgIHRoaXMudHJpZ2dlcihcImNvbW1pdFwiLCBtdXRhdGlvbiwgLi4uYXJncyk7XG4gICAgc3RvcmUuaW5pdC5mcm96ZW4gPSB0cnVlO1xuICB9LFxuXG4gIC8qKlxuICAgKiBUaGlzIG1ldGhvZCBwcm9jZXNzIGFuIGFjdGlvblxuICAgKiBAdGhyb3dzIFRoaXMgd2lsbCB0aHJvdyBhbiBlcnJvciBpZiB0aGUgYWN0aW9uIGRvZXMgbm90IGV4aXN0c1xuICAgKiBAcGFyYW0ge1N0cmluZ30gYWN0aW9uIFRoZSBhY3Rpb24gbmFtZSB0byBwcm9jZXNzXG4gICAqIEBwYXJhbSAgey4uLmFueX0gW2FyZ3NdIFRoZSBhcmd1bWVudHMgdG8gcGFzcyB0byB0aGUgYWN0aW9uXG4gICAqIEByZXR1cm5zIHtQcm9taXNlfSBUaGUgYWN0aW9uIGNhbGwgYXMgYSBwcm9taXNlXG4gICAqL1xuICBkaXNwYXRjaChhY3Rpb24sIC4uLmFyZ3MpIHtcbiAgICBsZXQgeyBzdG9yZSwga2V5IH0gPSB0aGlzLmdldFN0b3JlKHRoaXMsIGFjdGlvbik7XG4gICAgdGhpcy5rZXlFeGlzdHMoXCJhY3Rpb25cIiwgc3RvcmUuaW5pdC5hY3Rpb25zLCBrZXkpO1xuXG4gICAgc3RvcmUuaW5pdC5mcm96ZW4gPSBmYWxzZTtcbiAgICB0aGlzLnRyaWdnZXIoXCJiZWZvcmVkaXNwYXRjaFwiLCBhY3Rpb24sIC4uLmFyZ3MpO1xuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoc3RvcmUuaW5pdC5hY3Rpb25zW2tleV0oc3RvcmUsIC4uLmFyZ3MpKS50aGVuKFxuICAgICAgKHJlc3VsdCkgPT4ge1xuICAgICAgICB0aGlzLnRyaWdnZXIoXCJkaXNwYXRjaFwiLCBhY3Rpb24sIC4uLmFyZ3MpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgICk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFRoaXMgbWV0aG9kIHRyaWdnZXJzIGFuIGV2ZW50XG4gICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudCBUaGUgZXZlbnQgbmFtZSB0byB0cmlnZ2VyXG4gICAqIEBwYXJhbSAgey4uLmFueX0gW2FyZ3NdIFRoZSBhcmd1bWVudHMgdGhhdCB3aWxsIGJlIHBhc3NlZCB0byB0aGUgbGlzdGVuZXJcbiAgICogQHJldHVybnMge1ZvaWR9IFZvaWRcbiAgICovXG4gIHRyaWdnZXIoZXZlbnQsIC4uLmFyZ3MpIHtcbiAgICB0aGlzLmluaXQubGlzdGVuZXJzW2V2ZW50XS5mb3JFYWNoKChjYWxsYmFjaykgPT4gY2FsbGJhY2sodGhpcywgLi4uYXJncykpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBUaGlzIG1ldGhvZCBhZGRzIGFuIGV2ZW50IGxpc3RlbmVyIHRvIHRoZSBzdG9yZVxuICAgKiBAdGhyb3dzIFRoaXMgd2lsbCB0aHJvdyBhbiBlcnJvciBpZiB0aGUgbGlzdGVuZXIgaXMgbm90IGEgZnVuY3Rpb25cbiAgICogQHRocm93cyBUaGlzIHdpbGwgdGhyb3cgYW4gZXJyb3IgaWYgdGhlIGV2ZW50IGRvZXMgbm90IGV4aXN0c1xuICAgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnQgVGhlIGV2ZW50IHRvIHdoaWNoIHRvIGFkZCB0aGUgbGlzdGVuZXJcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gbGlzdGVuZXIgVGhlIGxpc3RlbmVyIHRvIGFkZFxuICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFRoZSBmdW5jdGlvbiB0byB1bnN1YnNjcmliZVxuICAgKi9cbiAgb24oZXZlbnQsIGxpc3RlbmVyKSB7XG4gICAgdGhpcy5pc0Z1bmN0aW9uKFwibGlzdGVuZXJcIiwgbGlzdGVuZXIpO1xuICAgIHRoaXMua2V5RXhpc3RzKFwiZXZlbnRcIiwgdGhpcy5pbml0Lmxpc3RlbmVycywgZXZlbnQpO1xuICAgIGlmICh0aGlzLmluaXQubGlzdGVuZXJzW2V2ZW50XS5pbmRleE9mKGxpc3RlbmVyKSA9PT0gLTEpIHtcbiAgICAgIHRoaXMuaW5pdC5saXN0ZW5lcnNbZXZlbnRdLnB1c2gobGlzdGVuZXIpO1xuICAgICAgdGhpcy50cmlnZ2VyKFwiYWRkbGlzdGVuZXJcIiwgZXZlbnQsIGxpc3RlbmVyKTtcbiAgICB9XG5cbiAgICByZXR1cm4gKCkgPT4gdGhpcy5vZmYoZXZlbnQsIGxpc3RlbmVyKTtcbiAgfSxcblxuICAvKipcbiAgICogVGhpcyBtZXRob2QgcmVtb3ZlcyBhbiBldmVudCBsaXN0ZW5lciBmcm9tIHRoZSBzdG9yZVxuICAgKiBAdGhyb3dzIFRoaXMgd2lsbCB0aHJvdyBhbiBlcnJvciBpZiB0aGUgbGlzdGVuZXIgaXMgbm90IGEgZnVuY3Rpb25cbiAgICogQHRocm93cyBUaGlzIHdpbGwgdGhyb3cgYW4gZXJyb3IgaWYgdGhlIGV2ZW50IGRvZXMgbm90IGV4aXN0c1xuICAgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnQgVGhlIGV2ZW50IHRvIHdoaWNoIHRvIHJlbW92ZSB0aGUgbGlzdGVuZXJcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gbGlzdGVuZXIgVGhlIGxpc3RlbmVyIHRvIHJlbW92ZVxuICAgKiBAcmV0dXJucyB7Vm9pZH0gVm9pZFxuICAgKi9cbiAgb2ZmKGV2ZW50LCBsaXN0ZW5lcikge1xuICAgIHRoaXMuaXNGdW5jdGlvbihcImxpc3RlbmVyXCIsIGxpc3RlbmVyKTtcbiAgICB0aGlzLmtleUV4aXN0cyhcImV2ZW50XCIsIHRoaXMuaW5pdC5saXN0ZW5lcnMsIGV2ZW50KTtcbiAgICBsZXQgaW5kZXggPSB0aGlzLmluaXQubGlzdGVuZXJzW2V2ZW50XS5pbmRleE9mKGxpc3RlbmVyKTtcbiAgICBpZiAoaW5kZXggPiAtMSkge1xuICAgICAgdGhpcy5pbml0Lmxpc3RlbmVyc1tldmVudF0uc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgIHRoaXMudHJpZ2dlcihcInJlbW92ZWxpc3RlbmVyXCIsIGV2ZW50LCBsaXN0ZW5lcik7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBUaGlzIG1ldGhvZCBhZGRzIGEgcGx1Z2luIHRvIHRoZSBTdG9yZVxuICAgKiBAdGhyb3dzIFRoaXMgd2lsbCB0aHJvdyBhbiBlcnJvciBpZiB0aGUgcGx1Z2luIGlzIG5vdCBhIGZ1bmN0aW9uXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IHBsdWdpbiBUaGUgcGx1Z2luIHRvIGFkZFxuICAgKiBAcGFyYW0gey4uLmFueX0gW29wdGlvbnNdIFRoZSBvcHRpb25zIHBhc3NlZCB0byB0aGUgcGx1Z2luXG4gICAqIEByZXR1cm5zIHtWb2lkfSBWb2lkXG4gICAqL1xuICB1c2UocGx1Z2luLCAuLi5vcHRpb25zKSB7XG4gICAgdGhpcy5pc0Z1bmN0aW9uKFwicGx1Z2luXCIsIHBsdWdpbik7XG4gICAgaWYgKHRoaXMuaW5pdC5wbHVnaW5zLmluZGV4T2YocGx1Z2luKSA9PT0gLTEpIHtcbiAgICAgIHBsdWdpbih0aGlzLCAuLi5vcHRpb25zKTtcbiAgICAgIHRoaXMuaW5pdC5wbHVnaW5zLnB1c2gocGx1Z2luKTtcbiAgICAgIHRoaXMudHJpZ2dlcihcInBsdWdpblwiLCBwbHVnaW4sIC4uLm9wdGlvbnMpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogVGhpcyBtZXRob2QgYWRkcyBhIG1vZHVsZSB0byB0aGUgc3RvcmVcbiAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWVzcGFjZSBUaGUgbmFtZXNwYWNlIHRvIGF0dGFjaCB0aGUgbW9kdWxlXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBtb2R1bGUgVGhlIG1vZHVsZSBkZWZpbml0aW9uXG4gICAqIEByZXR1cm5zIHtWb2lkfSBWb2lkXG4gICAqL1xuICByZWdpc3Rlck1vZHVsZShuYW1lc3BhY2UsIG1vZHVsZSkge1xuICAgIGxldCByb290U3RvcmUgPSB0aGlzO1xuXG4gICAgaWYgKHJvb3RTdG9yZS5pbml0Lm1vZHVsZXNbbmFtZXNwYWNlXSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgQSBtb2R1bGUgd2l0aCB0aGUgbmFtZXNwYWNlIFwiJHtuYW1lc3BhY2V9XCIgaXMgYWxyZWFkeSByZWdpc3RlcmVkLmBcbiAgICAgICk7XG4gICAgfVxuXG4gICAgbGV0IG5ld1N0b3JlID0gbmV3IERyYWdvbmJpbmRlcihcbiAgICAgIE9iamVjdC5hc3NpZ24oeyByb290U3RvcmUsIG5hbWVzcGFjZSB9LCBtb2R1bGUpXG4gICAgKTtcblxuICAgIHJvb3RTdG9yZS5pbml0LmZyb3plbiA9IGZhbHNlO1xuICAgIHJvb3RTdG9yZS5pbml0Lm1vZHVsZXNbbmFtZXNwYWNlXSA9IG5ld1N0b3JlO1xuICAgIHJvb3RTdG9yZS5zdGF0ZVtuYW1lc3BhY2VdID0gbmV3U3RvcmUuc3RhdGU7XG4gICAgcm9vdFN0b3JlLmluaXQuZnJvemVuID0gdHJ1ZTtcbiAgICByb290U3RvcmUudHJpZ2dlcihcInJlZ2lzdGVyTW9kdWxlXCIsIG5hbWVzcGFjZSwgbW9kdWxlLCBuZXdTdG9yZSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFRoaXMgbWV0aG9kIHJlbW92ZXMgYSBtb2R1bGUgZnJvbSB0aGUgc3RvcmVcbiAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWVzcGFjZSBUaGUgbmFtZXNwYWNlIG9mIHRoZSBhdHRhY2hlZCBtb2R1bGVcbiAgICogQHJldHVybnMge1ZvaWR9IFZvaWRcbiAgICovXG4gIHVucmVnaXN0ZXJNb2R1bGUobmFtZXNwYWNlKSB7XG4gICAgbGV0IHJvb3RTdG9yZSA9IHRoaXM7XG4gICAgbGV0IHN0b3JlID0gcm9vdFN0b3JlLmluaXQubW9kdWxlc1tuYW1lc3BhY2VdO1xuXG4gICAgaWYgKHN0b3JlKSB7XG4gICAgICBzdG9yZS5pbml0LmNoaWxkTW9kdWxlTmFtZXNwYWNlcy5mb3JFYWNoKChuKSA9PlxuICAgICAgICByb290U3RvcmUudW5yZWdpc3Rlck1vZHVsZShgJHtuYW1lc3BhY2V9LiR7bn1gKVxuICAgICAgKTtcblxuICAgICAgcm9vdFN0b3JlLmluaXQuZnJvemVuID0gZmFsc2U7XG4gICAgICBkZWxldGUgcm9vdFN0b3JlLmluaXQubW9kdWxlc1tuYW1lc3BhY2VdO1xuICAgICAgZGVsZXRlIHJvb3RTdG9yZS5zdGF0ZVtuYW1lc3BhY2VdO1xuICAgICAgcm9vdFN0b3JlLmluaXQuZnJvemVuID0gdHJ1ZTtcbiAgICAgIHJvb3RTdG9yZS50cmlnZ2VyKFwidW5yZWdpc3Rlck1vZHVsZVwiLCBuYW1lc3BhY2UsIHN0b3JlKTtcbiAgICB9XG4gIH1cbn07XG5cbkRyYWdvbmJpbmRlci5mbiA9IERyYWdvbmJpbmRlci5wcm90b3R5cGU7XG5cbmlmICh0eXBlb2YgZXhwb3J0cyA9PT0gXCJvYmplY3RcIikge1xuICBtb2R1bGUuZXhwb3J0cyA9IERyYWdvbmJpbmRlcjtcbn0gZWxzZSB7XG4gICh0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiID8gZ2xvYmFsIDogd2luZG93KS5EcmFnb25iaW5kZXIgPSBEcmFnb25iaW5kZXI7XG59XG4iXSwibWFwcGluZ3MiOiJNQUtBLFNBQUFBLEVBQW9CQyxHQUNsQixHQUFtQixpQkFBUkEsR0FBNEIsT0FBUkEsSUFBaUJDLE9BQU9DLFNBQVNGLEdBQU0sQ0FDcEUsR0FBSUcsTUFBTUMsUUFBUUosR0FDaEIsUUFBU0ssRUFBSSxFQUFHQyxFQUFJTixFQUFJTyxPQUFRRixFQUFJQyxFQUFHRCxJQUNyQ04sRUFBV0MsRUFBSUssUUFFWixDQUNMLElBQUlHLEVBQVFDLFFBQVFDLFFBQVFWLEdBQzVCLFFBQVNLLEVBQUksRUFBR0MsRUFBSUUsRUFBTUQsT0FBUUYsRUFBSUMsRUFBR0QsSUFDdkNOLEVBQVdDLEVBQUlRLEVBQU1ILEtBR3pCSixPQUFPVSxPQUFPWCxHQUdoQixPQUFPQSxFQWdCVCxTQUFBWSxHQUFzQkMsTUFDcEJBLEVBQUFDLFVBQ0FBLEVBQUFDLFFBQ0FBLEVBQUFDLFFBQ0FBLEVBQUFDLFFBQ0FBLEVBQUFDLGFBQ0FBLEdBQWUsRUFBQUMsVUFDZkEsRUFBQUMsVUFDQUEsR0FDRSxJ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